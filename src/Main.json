{
  "namespace": "Main",
  "functions": [
    {
      "name": "main",
      "params": [{"name": "arguments", "type": "string[]"}],
      "locals": [
        {"name": "device",       "type": "*void"},
        {"name": "commandQueue", "type": "*void"},
        {"name": "layer",        "type": "*void"}
      ],
      "body": [
        {
          "let": {"name": "device", "value": {
            "call": {"namespace": "Gfx", "function": "GetDevice", "args": {}}
          }}
        },
        { "print": "device" },
        {
          "let": {"name": "layer", "value": {
            "call": {"namespace": "Gfx", "function": "GetLayer", "args": {}}
          }}
        },
        { "print": "layer" },
        {
          "let": {"name": "commandQueue", "value": {
            "call": {"namespace": "MetalDevice", "function": "newCommandQueue",
              "args": {"device": "device"}}
          }}
        },
        { "print": "commandQueue" },
        {
          "call": {"namespace": "MetalRenderer", "function": "drawRect",
            "args": {
              "layer":        "layer",
              "commandQueue": "commandQueue",
              "x":            100,
              "y":            100,
              "w":            200,
              "h":            150,
              "r":            1.0,
              "g":            0.0,
              "b":            0.0
            }}
        },
        { "print": {"string": "draw complete"} }
      ]
    }
  ]
}